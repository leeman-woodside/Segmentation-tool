(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],h=0,u=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&u.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},n=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("85ec"),s=a.n(i);s.a},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},4602:function(t,e,a){},5:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("a026"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],o=(a("034f"),a("2877")),r={},c=Object(o["a"])(r,s,n,!1,null,null,null),l=c.exports,d=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("Tool")],1)},u=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Tool",on:{mousedown:t.preventDefault}},[a("b-navbar",{attrs:{type:"dark",variant:"dark"}},[a("b-navbar-brand",{attrs:{href:"https://www.smartvisionworks.com/"}}),a("b-navbar-nav",[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-2",modifiers:{"sidebar-2":!0}}],staticClass:"nav-bar-button"},[t._v("Instruction")]),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-1",modifiers:{"sidebar-1":!0}}],staticClass:"nav-bar-button"},[t._v(" View Files ")])],1)],1),a("b-sidebar",{staticClass:"col-sm-2 col-md-1 sidebar",attrs:{id:"sidebar-1",shadow:""},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticStyle:{"text-align":"right"}},[t._v(" Files "),a("b-button",{on:{click:t.getFiles}},[a("svg",{staticClass:"bi bi-arrow-clockwise",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M3.17 6.706a5 5 0 0 1 7.103-3.16.5.5 0 1 0 .454-.892A6 6 0 1 0 13.455 5.5a.5.5 0 0 0-.91.417 5 5 0 1 1-9.375.789z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M8.147.146a.5.5 0 0 1 .707 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 1 1-.707-.708L10.293 3 8.147.854a.5.5 0 0 1 0-.708z"}})])])],1)]},proxy:!0}])},[a("div",{staticClass:"px-3 py-2"},[a("b-table",{attrs:{striped:"",hover:"",selectable:"","select-mode":"single","sticky-header":"500px",items:t.folders,fields:t.fields},on:{"row-selected":t.showFiles}}),a("br"),a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"files"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),a("p",{staticClass:"mt-3"},[t._v("Current Page: "+t._s(t.currentPage))]),a("b-table",{attrs:{id:"files",striped:"",hover:"",selectable:"","select-mode":"single","sticky-header":"500px","per-page":t.perPage,"current-page":t.currentPage,items:t.files,fields:t.fields2,small:""},on:{"row-selected":t.toggle},scopedSlots:t._u([{key:"cell(image)",fn:function(e){return[a("img",{staticStyle:{height:"55px"},attrs:{src:"/images/"+t.activeFolder+"/"+e.item.image}})]}},{key:"cell(mask)",fn:function(e){return[t.mask_Data[t.activeFolder]&&t.mask_Data[t.activeFolder].includes(e.item.image)?a("img",{staticStyle:{height:"55px"},attrs:{src:"/masks/"+t.activeFolder+"/"+e.item.image}}):t._e()]}}])})],1)]),a("b-sidebar",{staticClass:"sidebar",attrs:{id:"sidebar-2",title:"Instructions",shadow:""}},[a("div",{staticClass:"px-3 py-2"},[a("ol",[a("li",[a("b",[t._v("1.")]),t._v(' Upload Files by clicking "Upload Files" button.')]),a("li",[a("b",[t._v("2.")]),t._v(" Click and drag on the image to make a rectangle around desired object.")]),a("li",[a("b",[t._v("3.")]),t._v(' Click "Select" or press the spacebar to segment the desired area.')]),a("li",[a("b",[t._v("4.")]),t._v(' If the outcome is acceptable click "Save".')]),a("li",[a("b",[t._v("5.")]),t._v(" If adjustments need to be made use the \"Foreground\" and \"Background\" buttons or press 'F' and 'B' and draw on the image using the respective tools for foreground and background areas.")]),a("li",[a("b",[t._v("6.")]),t._v(' Click "Select" again to re-segment on the new selections.')]),a("li",[a("b",[t._v("7.")]),t._v(" Continue this process on the image until desired segmentation has been achieved.")]),a("li",[a("b",[t._v("8.")]),t._v(' Click "Save" and repeat this process for each image.')]),a("li",[a("b",[t._v("9.")]),t._v(" When all images have been completed and saved click the download button on the top toolbar to retreave your masks.")]),a("li",[a("b",[t._v("10.")]),t._v(" Good Job!")])])])]),a("div",{staticStyle:{padding:"20px"}},[a("canvas",{ref:"canvasOutput",staticStyle:{width:"512px",height:"512px"},style:{cursor:t.cursorType},attrs:{id:"canvasOutput"}}),a("canvas",{staticStyle:{width:"512px",height:"512px"},attrs:{id:"canvasInput"}}),a("canvas",{staticStyle:{width:"512px",height:"512px",display:"none"},attrs:{id:"canvasMask"}})]),a("b-row",{staticClass:"justify-content-md-center"},[this.toolActive?a("b-button-toolbar",{attrs:{"key-nav":"","aria-label":"Toolbar with button groups"}},[a("div",[a("b-button-group",{staticClass:"mx-1"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"(left-arrow)",expression:"'(left-arrow)'",modifiers:{hover:!0,bottom:!0}}],attrs:{"b-button":""},on:{click:t.prev}},[a("b-icon",{attrs:{icon:"arrow-left","aria-hidden":"true"}})],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"(right-arrow)",expression:"'(right-arrow)'",modifiers:{hover:!0,bottom:!0}}],attrs:{"b-button":""},on:{click:t.next}},[a("b-icon",{attrs:{icon:"arrow-right","aria-hidden":"true"}})],1)],1)],1),a("div",[a("b-button-group",{staticClass:"mx-1"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bpointer.bottom",value:"(F)",expression:"'(F)'",modifiers:{hover:!0,bpointer:!0,bottom:!0}}],on:{click:t.fgDraw}},[t._v("Foreground")]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"(B)",expression:"'(B)'",modifiers:{hover:!0,bottom:!0}}],on:{click:t.bgDraw}},[t._v("Background")]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"(C)",expression:"'(C)'",modifiers:{hover:!0,bottom:!0}}],on:{click:t.continueDraw}},[t._v("Continue")]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"(U)",expression:"'(U)'",modifiers:{hover:!0,bottom:!0}}],on:{click:t.undo}},[a("b-icon",{attrs:{icon:"arrow-counterclockwise","aria-hidden":"true"}}),t._v(" Undo ")],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"(R)",expression:"'(R)'",modifiers:{hover:!0,bottom:!0}}],on:{click:t.resetImg}},[t._v("Reset")])],1)],1),a("div",[a("b-button-group",{staticClass:"mx-1"},[t.selected?a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"(S)",expression:"'(S)'",modifiers:{hover:!0,bottom:!0}}],on:{click:t.saveMask}},[t._v("Save")]):t._e()],1)],1)]):t._e()],1)],1)},m=[],f=(a("99af"),a("4de4"),a("4160"),a("caad"),a("c975"),a("a434"),a("d3b7"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("fdc5")),v=a.n(f),b=a("d66f"),p=a("bc3a"),w=a.n(p),k={name:"Tool",data:function(){return{activeFolder:"",perPage:4,currentPage:1,index:"",img:new Image,width:512,height:512,mat:"",imageView:"",image:"",tempMask2:"",finalMaskResult:"",greenMask:"",redMask:"",addWeightedMat:"",img_dir:[],img_dir_pos:0,rect:"",p1:"",p3:"",color:"",drawType:"",alpha:-.5,beta:1,gamma:1,count:0,drawing:!1,drawLine:!1,selected:!1,continue:!1,toolActive:!1,rectDrawn:!1,foregroundPoints:[],backgroundPoints:[],undoPointsFg:[],undoPointsBg:[],undoPoints:[],undoMats:[],fileNames:[],image_Data:null,mask_Data:null,activeIndex:-1,cursorType:"crosshair",actionVariant:"outline-secondary",downloadColor:"warning",fields:["folder_name","images","masks"],fields2:["image","mask"],folders:[],files:[]}},computed:{activeFile:function(){return""==this.activeFolder||-1==this.activeIndex?"":this.image_Data[this.activeFolder][this.activeIndex]},rows:function(){return this.files.length}},methods:{preventDefault:function(t){console.log(t),t.preventDefault()},toggle:function(t){this.activeIndex=this.image_Data[this.activeFolder].indexOf(t[0].image),console.log(t[0].image),this.activeFile=this.image_Data[this.activeFolder][this.activeIndex],console.log(this.image_Data[this.activeFolder][this.activeIndex]),this.img.src="/images/".concat(this.activeFolder,"/").concat(this.image_Data[this.activeFolder][this.activeIndex]),this.resetImg()},getFiles:function(){var t=this,e=[],a=this;this.toolActive=!0,e.push(new Promise((function(t,e){w.a.get("/imageLocation/images").then((function(e){console.log(e.data),a.image_Data=e.data,t()})).catch((function(t){e(t)}))}))),e.push(new Promise((function(t,e){w.a.get("/imageLocation/masks").then((function(e){console.log(e.data),a.mask_Data=e.data,t()})).catch((function(t){e(t)}))}))),Promise.all(e).then((function(){t.getFolders(),console.log("here")})).catch((function(t){console.log(t)}))},getFolders:function(){for(var t in console.log("here"),this.folders=[],this.image_Data)this.folders.push({folder_name:t,images:this.image_Data[t].length,masks:this.mask_Data[t]?this.mask_Data[t].length:0}),console.log(this.folders)},showFiles:function(t){this.files=[],this.activeFolder=t[0].folder_name;var e=this;console.log(t),this.image_Data[t[0].folder_name].forEach((function(t){e.files.push({image:t,mask:t})})),console.log(this.files)},saveMask:function(){this.addMask(this.finalMaskResult),this.actionVariant="outline-success";var t=document.getElementById("canvasMask"),e=this;t.toBlob((function(t){var a=new FormData;a.append("masks",t,"".concat(e.activeFolder,"/").concat(e.activeFile)),w.a.post("/upload/masks",a).then((function(t){console.log(t)}),(function(t){console.log(t)})),e.next(),e.getFiles()}))},showImg:function(){if(this.mat=b["imread"](this.img),b["resize"](this.mat,this.imageView,new b["Size"](512,512),0,0,b["INTER_NEAREST"]),b["imshow"]("canvasOutput",this.imageView),this.mask_Data[this.activeFolder]&&this.mask_Data[this.activeFolder].includes(this.activeFile)){var t=new Image;t.src="/masks/".concat(this.activeFolder,"/").concat(this.activeFile),t.onload=function(){var e=b["imread"](t);b["imshow"]("canvasInput",e)}}},prev:function(){this.activeIndex>0?this.activeIndex-=1:this.activeIndex=this.image_Data[this.activeFolder].length-1,this.img.src="/images/".concat(this.activeFolder,"/").concat(this.image_Data[this.activeFolder][this.activeIndex]),this.resetImg()},next:function(){this.activeIndex===this.image_Data[this.activeFolder].length-1?this.activeIndex=0:this.activeIndex+=1,this.resetImg()},resetImg:function(){var t=this,e=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](52,64,58,255));this.cursorType="crosshair",this.actionVariant="outline-secondary",this.selected=!1,this.drawLine=!1,this.drawing=!1,this.continue=!1,this.rectDrawn=!1,this.backgroundPoints=[],this.foregroundPoints=[],this.undoPointsFg=[],this.undoPointsBg=[],this.undoPoints=[],this.undoMats=[],delete this.rect,this.count=0,this.finalMaskResult.delete(),this.finalMaskResult=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](0,0,0,255)),this.addWeightedMat.delete(),this.addWeightedMat=new b["Mat"],this.grabCutMask.delete(),this.grabCutMask=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](0,0,0,255)),this.img.src="/images/".concat(this.activeFolder,"/").concat(this.image_Data[this.activeFolder][this.activeIndex]),this.img.onload=function(){t.showImg(),b["imshow"]("canvasInput",e)}},mouseDown:function(t){this.p3=t.point,this.drawLine?this.draw(t):(this.rectangle(t),this.rectDrawn=!0)},mouseDrag:function(t){this.drawLine?this.draw(t):(this.rectangle(t),this.rectDrawn=!0)},mouseUp:function(){if(this.foregroundPoints.length>0||this.backgroundPoints.length>0){var t=this.image.clone();this.undoMats.push(t)}this.undoPointsFg.length>0&&(this.undoPoints.push(this.undoPointsFg),this.undoPointsFg=[]),this.undoPointsBg.length>0&&(this.undoPoints.push(this.undoPointsBg),this.undoPointsBg=[])},draw:function(t){if(this.p1=t.point,this.drawing=!0,b["circle"](this.image,this.p1,2,this.color,-1),0===this.foregroundPoints.length&&0===this.backgroundPoints.length){var e=this.image.clone();console.log("original image coppied"),this.undoMats.push(e)}"Fore point"===this.drawType?(this.foregroundPoints.push(this.p1),this.undoPointsFg.push(this.p1)):"Back point"===this.drawType&&(this.backgroundPoints.push(this.p1),this.undoPointsBg.push(this.p1)),b["imshow"]("canvasOutput",this.image)},fgDraw:function(){this.selected&&(this.drawLine=!0,this.drawType="Fore point",this.cursorType="pointer",this.color=new b["Scalar"](255,0,0,255))},bgDraw:function(){this.selected&&(this.drawLine=!0,this.drawType="Back point",this.cursorType="pointer",this.color=new b["Scalar"](0,255,0,255))},rectangle:function(t){this.color=new b["Scalar"](0,0,255,255);var e=t.point;delete this.rect,this.image.delete(),e.x>this.width&&(e.x=this.width-2),e.y>this.height&&(e.y=this.height-2),e.x=e.x<0?1:e.x,e.y=e.y<0?1:e.y;var a=Math.abs(e.x-this.p3.x),i=Math.abs(e.y-this.p3.y);this.image=this.imageView.clone(),this.rect=new b["Rect"](Math.min(e.x,this.p3.x),Math.min(e.y,this.p3.y),a,i),b["rectangle"](this.image,e,this.p3,this.color,2),b["imshow"]("canvasOutput",this.image)},continueDraw:function(){this.addMask(this.finalMaskResult),this.count+=1,this.continue=!0,this.grabCutMask.delete(),this.grabCutMask=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](0,0,0,255)),console.log("deleted grabcutMask"),b["imshow"]("canvasMask",this.finalMaskResult),this.selected=!1,this.drawLine=!1,this.drawing=!1,this.foregroundPoints=[],this.backgroundPoints=[],this.imageView=this.addWeightedMat.clone(),b["imshow"]("canvasOutput",this.imageView),this.drawType="rect",this.cursorType="crosshair",this.color=new b["Scalar"](0,0,255,255)},undo:function(){if(this.undoPoints.length>0){console.log("Foreground",this.foregroundPoints.length),console.log("Background",this.backgroundPoints.length),this.undoMats.splice(this.undoMats.length-1,1),b["imshow"]("canvasOutput",this.undoMats[this.undoMats.length-1]),this.image=this.undoMats[this.undoMats.length-1].clone();var t=this.undoPoints;this.foregroundPoints=this.foregroundPoints.filter((function(e){return!t[t.length-1].includes(e)})),this.backgroundPoints=this.backgroundPoints.filter((function(e){return!t[t.length-1].includes(e)})),console.log("Foreground",this.foregroundPoints.length),console.log("Background",this.backgroundPoints.length),this.undoPoints.splice(this.undoPoints.length-1,1)}},select:function(){this.rectDrawn&&(this.selected=!0,this.grab_Cut())},grab_Cut:function(){var t,e=this.imageView.clone(),a=new b["Mat"],i=new b["Mat"],s=new b["Mat"],n=new b["Mat"],o=new b["Mat"],r=new b["Mat"],c=new b["Rect"](.5*this.rect.x,.5*this.rect.y,.5*this.rect.width,.5*this.rect.height);if(b["cvtColor"](e,e,1,0),this.drawing){console.log("foreground points",this.foregroundPoints.length),console.log("background points",this.backgroundPoints.length),t=b["GC_INIT_WITH_MASK"];for(var l=0;l<this.foregroundPoints.length;l++)this.tempMask2.ucharPtr(.5*this.foregroundPoints[l].y,.5*this.foregroundPoints[l].x)[0]=1;for(l=0;l<this.backgroundPoints.length;l++)this.tempMask2.ucharPtr(.5*this.backgroundPoints[l].y,.5*this.backgroundPoints[l].x)[0]=0}else t=b["GC_INIT_WITH_RECT"];b["resize"](e,a,new b["Size"](256,256),0,0,b["INTER_NEAREST"]),b["grabCut"](a,this.tempMask2,c,o,r,4,t),b["resize"](this.tempMask2,i,new b["Size"](512,512),0,0,b["INTER_NEAREST"]),s=this.createMask(i).clone(),b["cvtColor"](s,s,1,0),b["cvtColor"](this.imageView,this.imageView,1,0),b["addWeighted"](this.greenMask,this.alpha,s.clone(),this.beta,this.gamma,n),b["addWeighted"](n.clone(),this.alpha,this.imageView,this.beta,this.gamma,this.addWeightedMat),b["imshow"]("canvasInput",this.grabCutMask),b["imshow"]("canvasOutput",this.addWeightedMat),e.delete(),a.delete(),i.delete(),s.delete(),n.delete(),o.delete(),r.delete()},createMask:function(t){var e=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](0,0,0,255)),a=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](1)),i=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](3)),s=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](this.count)),n=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](0));return b["compare"](t,a,a,b["CMP_EQ"]),b["compare"](t,i,i,b["CMP_EQ"]),b["bitwise_or"](a,i,n),b["subtract"](n,s,n),b["add"](e,n,t),a.delete(),i.delete(),s.delete(),n.delete(),this.grabCutMask=t.clone(),t},addMask:function(t){return b["add"](t,this.grabCutMask,t),b["imshow"]("canvasMask",t),t}},mounted:function(){var t=this;b["onRuntimeInitialized"]=function(){t.mat=new b["Mat"],t.imageView=new b["Mat"],t.image=new b["Mat"],t.tempMask2=new b["Mat"],t.grabCutMask=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](0,0,0,255)),t.finalMaskResult=new b["Mat"](512,512,b["CV_8UC1"],new b["Scalar"](0,0,0,255)),t.greenMask=new b["Mat"](512,512,b["CV_8UC3"],new b["Scalar"](152,231,153,100)),t.redMask=new b["Mat"](512,512,b["CV_8UC3"],new b["Scalar"](231,152,165,100)),t.addWeightedMat=new b["Mat"];var e=new v.a.Tool;e.onMouseDown=t.mouseDown,e.onMouseDrag=t.mouseDrag,e.onMouseUp=t.mouseUp,v.a.setup(t.$refs["canvasOutput"]),t.img.onload=function(){t.showImg()},t.getFiles(),window.addEventListener("keydown",(function(e){if(console.log("key:",e),t.toolActive)switch(e.code){case"ArrowUp":if(t.rectDrawn){var a=new b["Mat"];b["cvtColor"](t.grabCutMask,t.grabCutMask,1,0),b["cvtColor"](t.imageView,t.imageView,1,0),b["addWeighted"](t.greenMask,t.alpha,t.grabCutMask,t.beta,t.gamma,a),b["addWeighted"](a,t.alpha,t.imageView,t.beta,t.gamma,t.addWeightedMat),b["imshow"]("canvasInput",t.addWeightedMat),a.delete()}break;case"ArrowDown":if(t.rectDrawn){var i=new b["Mat"];b["cvtColor"](t.grabCutMask,t.grabCutMask,1,0),b["cvtColor"](t.imageView,t.imageView,1,0),b["addWeighted"](t.redMask,t.alpha,t.grabCutMask,t.beta,t.gamma,i),b["addWeighted"](i,t.alpha,t.imageView,t.beta,t.gamma,t.addWeightedMat),b["imshow"]("canvasInput",t.addWeightedMat),i.delete()}break;case"ArrowLeft":t.prev(),t.resetImg();break;case"ArrowRight":t.next(),t.resetImg();break;case"Space":t.select();break;case"KeyF":t.selected&&(t.drawLine=!0,t.fgDraw());break;case"KeyB":t.selected&&(t.drawLine=!0,t.bgDraw());break;case"KeyC":t.selected&&t.continueDraw();break;case"KeyR":t.selected&&t.resetImg();break;case"KeyS":t.selected&&t.saveMask();break;case"KeyU":t.selected&&t.undo();break}}),!1)}}},_=k,M=(a("ee70"),Object(o["a"])(_,g,m,!1,null,"226ccd46",null)),y=M.exports,C={name:"App",components:{Tool:y}},x=C,F=(a("cccb"),Object(o["a"])(x,h,u,!1,null,null,null)),P=F.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("div",{staticClass:"Tool",on:{mousedown:t.preventDefault}},[a("b-navbar",{attrs:{type:"dark",variant:"dark"}},[a("b-navbar-brand",{attrs:{href:"http://localhost:8082/#/"}}),a("b-navbar-nav",[a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{name:"myFiles",type:"file",webkitdirectory:""},on:{change:t.onFileSelected}}),a("b-button",{staticClass:"nav-bar-button",on:{click:function(e){return t.$refs.fileInput.click()}}},[t._v(" Upload Files "),a("b-icon",{attrs:{icon:"folder-plus","aria-hidden":"true"}})],1),a("b-button",{staticClass:"nav-bar-button",staticStyle:{position:"right"},on:{click:t.getFiles}},[t._v(" Get Masks ")]),a("b-button",{staticClass:"nav-bar-button",staticStyle:{position:"right"},on:{click:t.generateZip}},[a("b-icon",{attrs:{icon:"download","aria-hidden":"true"}}),t.numSaved>0?a("b-badge",{attrs:{variant:t.downloadColor}},[t._v(t._s(t.numSaved+" / "+t.img_dir.length))]):t._e()],1)],1)],1),a("b-card",{staticClass:"card-main"},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("b-card",{attrs:{"border-variant":"default","header-bg-variant":"default","header-text-variant":"default",align:"left"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("b-row",[a("b-col",{attrs:{cols:"4"}},[a("h2",[t._v("Folders")])])],1)],1),a("b-collapse",{attrs:{id:"cardSystems",visible:""}},[a("b-card-text",[a("b-table",{attrs:{striped:"",hover:"",selectable:"","select-mode":"single","sticky-header":"500px",items:t.folders,fields:t.fields},on:{"row-selected":t.showFiles}})],1)],1)],1)],1),a("b-col",{attrs:{cols:"6"}},[a("b-card",{attrs:{"border-variant":"default","header-bg-variant":"default","header-text-variant":"default",align:"left"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("b-row",[a("b-col",{attrs:{cols:"4"}},[a("h2",[t._v("Files")])])],1)],1),a("b-collapse",{attrs:{id:"fileSystems",visible:""}},[a("b-card-text",[a("b-table",{attrs:{striped:"",hover:"",selectable:"","select-mode":"single","sticky-header":"500px",items:t.files,fields:t.fields2},scopedSlots:t._u([{key:"cell(image)",fn:function(e){return[a("img",{staticStyle:{height:"141px"},attrs:{src:"/images/"+t.activeFolder+"/"+e.item.image}})]}},{key:"cell(mask)",fn:function(e){return[t.mask_Data[t.activeFolder]&&t.mask_Data[t.activeFolder].includes(e.item.image)?a("img",{staticStyle:{height:"141px"},attrs:{src:"/masks/"+t.activeFolder+"/"+e.item.image}}):t._e()]}}])})],1)],1)],1)],1)],1)],1)],1)])},S=[],I=(a("a15b"),a("ac1f"),a("1276"),a("90ef")),V=a("c4e3"),T=a("0083"),O={name:"Admin",data:function(){return{activeFolder:"",mask_Data:null,image_Data:null,fields:["folder_name","images","masks"],fields2:["image","mask"],folders:[],files:[]}},methods:{preventDefault:function(t){t.preventDefault()},onFileSelected:function(t){for(var e=t.target.files,a=0;a<e.length;a++){var i=new FormData;i.append("images",t.target.files[a]),w.a.post("/upload/images",i).then((function(t){console.log(t)}),(function(t){console.log(t)}))}},getFiles:function(){var t=this,e=[],a=this;e.push(new Promise((function(t,e){w.a.get("/imageLocation/images").then((function(e){console.log(e.data),a.image_Data=e.data,t()})).catch((function(t){e(t)}))}))),e.push(new Promise((function(t,e){w.a.get("/imageLocation/masks").then((function(e){console.log(e.data),a.mask_Data=e.data,t()})).catch((function(t){e(t)}))}))),Promise.all(e).then((function(){t.getFolders()})).catch((function(t){console.log(t)}))},getFolders:function(){for(var t in this.folders=[],this.image_Data)this.folders.push({folder_name:t,images:this.image_Data[t].length,masks:this.mask_Data[t]?this.mask_Data[t].length:0}),console.log(this.folders)},showFiles:function(t){this.files=[],this.activeFolder=t[0].folder_name;var e=this;this.image_Data[t[0].folder_name].forEach((function(t){e.files.push({image:t,mask:t})}))},generateZip:function(){var t=this;console.log(T["getBinaryContent"]);var e=new V,a=[],i=function(i){var s=e.folder(i);t.mask_Data[i].forEach((function(t){var e="/masks/".concat(i,"/").concat(t);a.push(new Promise((function(a,i){T["getBinaryContent"](e,(function(e,n){e&&i(e),s.file(t,n,{binary:!0}),a()}))})))}))};for(var s in this.mask_Data)i(s);console.log(a),Promise.all(a).then((function(){e.generateAsync({type:"blob"}).then((function(t){I["saveAs"](t,new Date(Date.now()).toLocaleDateString().split("/").join("-"))}))}))}},mounted:function(){this.getFiles(),this.getFolders()}},U=O,R=(a("dc1f"),Object(o["a"])(U,D,S,!1,null,"46085a06",null)),B=R.exports;i["default"].use(d["a"]);var E=new d["a"]({routes:[{path:"/",name:"Home",component:P},{path:"/admin",name:"Admin",component:B}]}),W=a("5f5b"),N=a("b1e0");a("2dd8"),a("f9e3");i["default"].use(W["a"]),i["default"].use(N["a"]),i["default"].config.productionTip=!1,new i["default"]({router:E,render:function(t){return t(l)}}).$mount("#app")},"5ced":function(t,e,a){},6:function(t,e){},7:function(t,e){},8:function(t,e){},"85ec":function(t,e,a){},9:function(t,e){},cccb:function(t,e,a){"use strict";var i=a("5ced"),s=a.n(i);s.a},dc1f:function(t,e,a){"use strict";var i=a("4602"),s=a.n(i);s.a},e114:function(t,e,a){},ee70:function(t,e,a){"use strict";var i=a("e114"),s=a.n(i);s.a}});
//# sourceMappingURL=app.fd2aae49.js.map